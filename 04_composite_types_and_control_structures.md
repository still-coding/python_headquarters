# 🏗️ Составные типы данных и алгоритмические структуры

# 🗿 Неизменяемые составные типы (immutable)

## 📦 Кортежи `tuple`

Кортеж - это упорядоченная **неизменяемая** коллекция объектов.

### Создание кортежей

```python
# Пустой кортеж
empty = ()
also_empty = tuple()

# Кортеж с элементами
point = (3, 4)
colors = ("красный", "зеленый", "синий")

# Кортеж из одного элемента (обязательна запятая!)
single = (42,)
not_tuple = (42)    # Это число, а не кортеж!

# Кортеж без скобок (но лучше со скобками для читаемости)
coords = 10, 20
```

### Операции с кортежами

```python
point = (3, 4, 5)

# Доступ (как у списков)
point[0]           # 3
point[-1]          # 5

# Срезы
point[0:2]         # (3, 4)

# Длина
len(point)         # 3

# Проверка принадлежности
3 in point         # True

# Конкатенация
(1, 2) + (3, 4)    # (1, 2, 3, 4)

# Повторение
(1, 2) * 3         # (1, 2, 1, 2, 1, 2)

# Нельзя изменять!
# point[0] = 10    # TypeError!
```

### Распаковка кортежей

```python
point = (3, 4)

# Распаковка
x, y = point       # x = 3, y = 4

# Обмен значений
a = 10
b = 20
a, b = b, a        # a = 20, b = 10

# Множественное присваивание
name, age, city = ("Иван", 25, "Москва")
```

### Когда использовать кортежи?

- Для неизменяемых данных (координаты, RGB цвета)
- Как ключи в словарях (списки нельзя!)
- Для возвращения нескольких значений из функции
- Когда нужна гарантия неизменности

# 🔄 Изменяемые типы данных (mutable)

## 📋 Списки `list`

Список - это упорядоченная изменяемая коллекция объектов.

### Создание списков

```python
# Пустой список
empty = []
also_empty = list()

# Список с элементами
numbers = [1, 2, 3, 4, 5]
mixed = [1, "hello", 3.14, True]
nested = [[1, 2], [3, 4], [5, 6]]

# Создание списка с помощью range()
nums = list(range(5))      # [0, 1, 2, 3, 4]
evens = list(range(0, 10, 2))  # [0, 2, 4, 6, 8]
```

### Операции со списками

```python
fruits = ["яблоко", "банан", "вишня"]

# Длина
len(fruits)        # 3

# Доступ по индексу
fruits[0]          # "яблоко"
fruits[-1]         # "вишня" (последний элемент)

# Срезы (как у строк)
fruits[0:2]        # ["яблоко", "банан"]
fruits[:2]         # ["яблоко", "банан"]
fruits[1:]         # ["банан", "вишня"]

# Изменение элементов
fruits[0] = "апельсин"
print(fruits)      # ["апельсин", "банан", "вишня"]

# Конкатенация
[1, 2] + [3, 4]    # [1, 2, 3, 4]

# Повторение
[1, 2] * 3         # [1, 2, 1, 2, 1, 2]

# Проверка принадлежности
"банан" in fruits  # True
"лимон" in fruits  # False
```

### [[04a_lists|Методы списков]]

```python
fruits = ["яблоко", "банан"]

# Добавление элементов
fruits.append("вишня")       # ["яблоко", "банан", "вишня"]
fruits.insert(1, "лимон")    # ["яблоко", "лимон", "банан", "вишня"]
fruits.extend(["груша", "слива"])  # добавляет несколько элементов

# Удаление элементов
fruits.remove("лимон")       # удаляет первое вхождение
last = fruits.pop()          # удаляет и возвращает последний элемент
second = fruits.pop(1)       # удаляет и возвращает элемент по индексу
del fruits[0]                # удаляет элемент по индексу

# Поиск
fruits.index("банан")        # возвращает индекс первого вхождения
fruits.count("яблоко")       # количество вхождений

# Сортировка и изменение порядка
numbers = [3, 1, 4, 1, 5]
numbers.sort()               # [1, 1, 3, 4, 5] (изменяет исходный список)
numbers.reverse()            # [5, 4, 3, 1, 1] (изменяет исходный список)

# Получение отсортированной копии (не изменяет исходный)
original = [3, 1, 4, 1, 5]
sorted_copy = sorted(original)  # [1, 1, 3, 4, 5]
reversed_copy = list(reversed(original))  # [5, 1, 4, 1, 3]
```

## 📚 Словари `dict`

Словарь - это изменяемая коллекция пар "ключ-значение". Доступ к элементам по ключу, а не по индексу.

### Создание словарей

```python
# Пустой словарь
empty = {}
also_empty = dict()

# Словарь с данными
person = {
    "name": "Иван",
    "age": 25,
    "city": "Москва"
}

# Создание из пар ключ-значение
grades = dict([("математика", 5), ("физика", 4)])

# Создание с помощью именованных аргументов
student = dict(name="Анна", age=22, major="Информатика")
```

### Операции со словарями

```python
person = {"name": "Иван", "age": 25, "city": "Москва"}

# Доступ к значениям
person["name"]           # "Иван"
person.get("age")        # 25
person.get("job", "Безработный")  # "Безработный" (значение по умолчанию)

# Изменение и добавление
person["age"] = 26       # изменяем значение
person["job"] = "Программист"  # добавляем новую пару

# Удаление
del person["city"]       # удаляем пару ключ-значение
job = person.pop("job")  # удаляем и возвращаем значение

# Проверка наличия ключа
"name" in person         # True
"salary" in person       # False

# Длина
len(person)              # количество пар ключ-значение
```

### [[04b_dicts|Методы словарей]]

```python
person = {"name": "Иван", "age": 25, "city": "Москва"}

# Получение ключей, значений, пар
person.keys()            # dict_keys(['name', 'age', 'city'])
person.values()          # dict_values(['Иван', 25, 'Москва'])
person.items()           # dict_items([('name', 'Иван'), ('age', 25), ('city', 'Москва')])

# Обновление
person.update({"job": "Программист", "age": 26})

# Очистка
person.clear()           # удаляет все элементы
```

## 🎯 Множества `set`

Множество - это изменяемая коллекция уникальных элементов без определенного порядка.

### Создание множеств

```python
# Пустое множество
empty = set()            # НЕ {}! Это словарь

# Множество с элементами
colors = {"красный", "зеленый", "синий"}
numbers = set([1, 2, 3, 2, 1])  # {1, 2, 3} (дубликаты удаляются)

# Множество из строки
letters = set("hello")   # {'h', 'e', 'l', 'o'}
```

### Операции с множествами и [[04c_sets|методы]]

```python
a = {1, 2, 3, 4}
b = {3, 4, 5, 6}

# Добавление и удаление
a.add(5)                 # {1, 2, 3, 4, 5}
a.remove(1)              # {2, 3, 4, 5} (ошибка, если элемента нет)
a.discard(1)             # ничего не делает, если элемента нет

# Объединение (союз)
a | b                    # {1, 2, 3, 4, 5, 6}
a.union(b)               # то же самое

# Пересечение
a & b                    # {3, 4}
a.intersection(b)        # то же самое

# Разность
a - b                    # {1, 2}
a.difference(b)          # то же самое

# Симметричная разность (элементы, которые есть в одном из множеств, но не в обоих)
a ^ b                    # {1, 2, 5, 6}
a.symmetric_difference(b) # то же самое

# Проверки
3 in a                   # True
a.issubset(b)           # является ли a подмножеством b
a.issuperset(b)         # является ли a надмножеством b
a.isdisjoint(b)         # не пересекаются ли множества
```

### Применение множеств

```python
# Удаление дубликатов из списка
numbers = [1, 2, 2, 3, 3, 3, 4]
unique = list(set(numbers))  # [1, 2, 3, 4]

# Быстрая проверка принадлежности (для больших коллекций)
valid_ids = {1, 5, 10, 15, 20}
user_id = 5
if user_id in valid_ids:     # Очень быстро для больших множеств
    print("Доступ разрешен")
```

# 🔄 Алгоритмические структуры (управляющие конструкции)

## 🤔 Условные операторы

### Оператор `if`

```python
age = 18

if age >= 18:
    print("Вы совершеннолетний")
```

### Оператор `if-else`

```python
temperature = 25

if temperature > 30:
    print("Жарко!")
else:
    print("Нормальная температура")
```

### Оператор `if-elif-else`

```python
score = 85

if score >= 90:
    grade = "Отлично"
elif score >= 80:
    grade = "Хорошо"
elif score >= 70:
    grade = "Удовлетворительно"
else:
    grade = "Неудовлетворительно"

print(f"Оценка: {grade}")
```

### Тернарный оператор

```python
age = 20
status = "Взрослый" if age >= 18 else "Ребенок"

# Эквивалентно:
if age >= 18:
    status = "Взрослый"
else:
    status = "Ребенок"
```

## 🔁 Циклы

### Цикл `for`

Цикл `for` используется для перебора элементов последовательности.

```python
# Перебор списка
fruits = ["яблоко", "банан", "вишня"]
for fruit in fruits:
    print(f"Мне нравится {fruit}")

# Перебор строки
for letter in "Python":
    print(letter)

# Перебор словаря
person = {"name": "Иван", "age": 25}

# Перебор ключей
for key in person:
    print(key)

# Перебор значений
for value in person.values():
    print(value)

# Перебор пар ключ-значение
for key, value in person.items():
    print(f"{key}: {value}")

# Использование range()
for i in range(5):          # 0, 1, 2, 3, 4
    print(i)

for i in range(1, 6):       # 1, 2, 3, 4, 5
    print(i)

for i in range(0, 10, 2):   # 0, 2, 4, 6, 8
    print(i)
```

### Цикл `while`

Цикл `while` выполняется, пока условие истинно.

```python
# Простой цикл while
count = 0
while count < 5:
    print(f"Счетчик: {count}")
    count += 1

# Ввод от пользователя
password = ""
while password != "secret":
    password = input("Введите пароль: ")
print("Доступ разрешен!")
```

### Управление циклами

```python
# break - выходит из цикла
for i in range(10):
    if i == 5:
        break  # выходим из цикла при i = 5
    print(i)  # выведет: 0, 1, 2, 3, 4

# continue - переходит к следующей итерации
for i in range(5):
    if i == 2:
        continue  # пропускаем i = 2
    print(i)  # выведет: 0, 1, 3, 4

# else в циклах - выполняется, если цикл завершился нормально (без break)
for i in range(3):
    print(i)
else:
    print("Цикл завершен нормально")  # выполнится

for i in range(5):
    if i == 3:
        break
    print(i)
else:
    print("Этот блок не выполнится")  # не выполнится из-за break
```

## 🔄 Включения (Comprehensions)

Включения - это компактный способ создания новых коллекций на основе существующих.

### Включения списков

```python
# Обычный способ
squares = []
for i in range(5):
    squares.append(i ** 2)
# squares = [0, 1, 4, 9, 16]

# С помощью включения
squares = [i ** 2 for i in range(5)]  # [0, 1, 4, 9, 16]

# С условием
evens = [i for i in range(10) if i % 2 == 0]  # [0, 2, 4, 6, 8]

# Обработка строк
words = ["python", "java", "javascript"]
lengths = [len(word) for word in words]  # [6, 4, 10]

# Вложенные циклы
matrix = [[i * j for j in range(3)] for i in range(3)]
# [[0, 0, 0], [0, 1, 2], [0, 2, 4]]
```

### Включения словарей

```python
# Создание словаря
squares_dict = {i: i ** 2 for i in range(5)}
# {0: 0, 1: 1, 2: 4, 3: 9, 4: 16}

# Обращение словаря
original = {"a": 1, "b": 2, "c": 3}
reversed_dict = {v: k for k, v in original.items()}
# {1: 'a', 2: 'b', 3: 'c'}

# С условием
big_squares = {i: i ** 2 for i in range(10) if i ** 2 > 10}
# {4: 16, 5: 25, 6: 36, 7: 49, 8: 64, 9: 81}
```

### Включения множеств

```python
# Уникальные квадраты
unique_squares = {i ** 2 for i in range(-5, 6)}
# {0, 1, 4, 9, 16, 25}

# Уникальные символы
text = "hello world"
unique_chars = {char for char in text if char != ' '}
# {'h', 'e', 'l', 'o', 'w', 'r', 'd'}
```

## 🎯 Полезные встроенные функции для работы с коллекциями

```python
numbers = [1, 5, 3, 9, 2]

# Сортировка
sorted(numbers)          # [1, 2, 3, 5, 9] (новый список)
sorted(numbers, reverse=True)  # [9, 5, 3, 2, 1]

# Фильтрация
list(filter(lambda x: x > 3, numbers))  # [5, 9]

# Преобразование
list(map(lambda x: x ** 2, numbers))    # [1, 25, 9, 81, 4]

# Объединение
list(zip([1, 2, 3], ['a', 'b', 'c']))   # [(1, 'a'), (2, 'b'), (3, 'c')]

# Нумерация элементов
fruits = ["яблоко", "банан", "вишня"]
list(enumerate(fruits))  # [(0, 'яблоко'), (1, 'банан'), (2, 'вишня')]

# Использование enumerate в цикле
for i, fruit in enumerate(fruits):
    print(f"{i}: {fruit}")

# Агрегирующие функции
sum(numbers)            # 20
min(numbers)            # 1
max(numbers)            # 9
len(numbers)            # 5

# Проверки
all([True, True, False])   # False (все ли True?)
any([True, False, False])  # True (есть ли хотя бы один True?)
```

## 📊 Полезные паттерны

### Подсчет элементов

```python
from collections import Counter

text = "hello world"
counter = Counter(text)
print(counter)  # Counter({'l': 3, 'o': 2, 'h': 1, 'e': 1, ' ': 1, 'w': 1, 'r': 1, 'd': 1})

# Самые частые элементы
counter.most_common(3)  # [('l', 3), ('o', 2), ('h', 1)]
```

### Группировка данных

```python
# Группировка чисел по четности
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
grouped = {"even": [], "odd": []}

for num in numbers:
    if num % 2 == 0:
        grouped["even"].append(num)
    else:
        grouped["odd"].append(num)

print(grouped)  # {'even': [2, 4, 6, 8, 10], 'odd': [1, 3, 5, 7, 9]}
```

### Работа с вложенными структурами

```python
# Список студентов
students = [
    {"name": "Иван", "grades": [5, 4, 5]},
    {"name": "Анна", "grades": [4, 5, 4]},
    {"name": "Петр", "grades": [3, 4, 3]}
]

# Средние оценки
for student in students:
    avg_grade = sum(student["grades"]) / len(student["grades"])
    print(f"{student['name']}: {avg_grade:.1f}")

# Лучшие студенты (средний балл >= 4.5)
best_students = [
    student["name"] 
    for student in students 
    if sum(student["grades"]) / len(student["grades"]) >= 4.5
]
print(f"Лучшие студенты: {best_students}")
```

## 🏁 Итоги

Теперь ты знаешь:

**Составные типы данных:**
- **Списки** `list` - изменяемые упорядоченные коллекции
- **Кортежи** `tuple` - неизменяемые упорядоченные коллекции
- **Словари** `dict` - изменяемые коллекции пар ключ-значение
- **Множества** `set` - изменяемые коллекции уникальных элементов

**Алгоритмические структуры:**
- **Условия**: `if`, `elif`, `else`
- **Циклы**: `for`, `while`
- **Управление циклами**: `break`, `continue`, `else`
- **Включения**: компактный синтаксис для создания коллекций
